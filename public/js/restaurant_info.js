let restaurant,map,mapLoaded=!1;document.addEventListener("DOMContentLoaded",()=>{fetchRestaurantFromURL((e,t)=>{e?console.error(e):(fillBreadcrumb(),lazyLoadImages(),document.getElementById("map").style.backgroundImage=`url(https://maps.googleapis.com/maps/api/staticmap?size=311x640&markers=size:mid|${t.latlng.lat},${t.latlng.lng}&key=AIzaSyDKsWF94cMGUciBs96YIpbCmexfRKT75x4&scale=2)`)})}),window.initMap=(()=>{mapLoaded=!0,self.map=new google.maps.Map(document.getElementById("map"),{zoom:16,center:self.restaurant.latlng,scrollwheel:!1}),DBHelper.mapMarkerForRestaurant(self.restaurant,self.map)}),fetchRestaurantFromURL=(e=>{if(self.restaurant)return void e(null,self.restaurant);const t=getParameterByName("id");t?DBHelper.fetchRestaurantById(t,(t,a)=>{self.restaurant=a,a?(fillRestaurantHTML(),e(null,a)):console.error(t)}):e("No restaurant id in URL",null)}),fillRestaurantHTML=((e=self.restaurant)=>{document.getElementById("restaurant-name").innerHTML=e.name,document.getElementById("restaurant-address").innerHTML=e.address;const t=document.getElementById("restaurant-img");t.className="lozad",t.setAttribute("data-src",DBHelper.imageUrlForRestaurant(e)),t.alt=`photo of ${e.name} restaurant`,document.getElementById("restaurant-cuisine").innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML()}),fillRestaurantHoursHTML=((e=self.restaurant.operating_hours)=>{const t=document.getElementById("restaurant-hours");for(let a in e){const n=document.createElement("tr");n.tabIndex=0;const r=document.createElement("td");r.innerHTML=a,n.appendChild(r);const s=document.createElement("td");s.innerHTML=e[a],n.appendChild(s),t.appendChild(n)}}),fillReviewsHTML=((e=self.restaurant.reviews)=>{const t=document.getElementById("reviews-container");if(!e){const e=document.createElement("p");return e.innerHTML="No reviews yet!",void t.appendChild(e)}const a=document.getElementById("reviews-list");e.forEach(e=>{a.appendChild(createReviewHTML(e))}),t.appendChild(a)}),createReviewHTML=(e=>{const t=document.createElement("li");t.tabIndex=0;const a=document.createElement("p");a.innerHTML=e.name,a.className="review-name",t.appendChild(a);const n=document.createElement("span");n.setAttribute("aria-label",`Rating: ${e.rating}`);for(let t=0;t<5;t++){const a=document.createElement("span");a.innerHTML="â˜…",t<e.rating&&(a.className="reviews-rating"),n.appendChild(a)}t.appendChild(n);const r=document.createElement("span");r.innerHTML=e.date,t.appendChild(r);const s=document.createElement("p");return s.innerHTML=e.comments,t.appendChild(s),t}),fillBreadcrumb=((e=self.restaurant)=>{const t=document.getElementById("breadcrumb"),a=document.createElement("li");a.innerHTML=e.name,t.appendChild(a)}),getParameterByName=((e,t)=>{t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");const a=new RegExp(`[?&]${e}(=([^&#]*)|&|#|$)`).exec(t);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null}),lazyLoadImages=(()=>{lozad().observe()}),loadRealMap=(()=>{if(mapLoaded)return;const e=document.createElement("script");e.type="text/javascript",e.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDKsWF94cMGUciBs96YIpbCmexfRKT75x4&libraries=places&callback=initMap",document.body.appendChild(e)});
//# sourceMappingURL=restaurant_info.js.map
